{% extends 'videos/base.html' %}

{% block title %}모델 허브{% endblock %}

<<<<<<< Updated upstream
{% block content %}
<<<<<<< Updated upstream
<div class="container">
    <!-- 헤더 -->
    <div class="row mb-4">
        <div class="col-md-8">
            <h2>
                <i class="bi bi-box-seam"></i> 모델 허브
            </h2>
            <p class="text-muted">객체 탐지 모델을 관리합니다</p>
        </div>
        <div class="col-md-4 text-end">
            <a href="{% url 'modelhub:model_add' %}" class="btn btn-primary">
                <i class="bi bi-plus-circle"></i> 모델 추가
            </a>
=======
=======
{% block breadcrumb %}
>>>>>>> Stashed changes
<div class="row">
    <div class="col-md-12">
        <div class="breadcrumb-container">
            <nav aria-label="breadcrumb">
                <ol class="custom-breadcrumb">
<<<<<<< Updated upstream
                    <!-- <li class="custom-breadcrumb-item">
                        <a href="{% url 'media_list' %}">
                            <i class="bi bi-folder2-open me-1"></i> 미디어 목록
                        </a>
                    </li> -->
=======
>>>>>>> Stashed changes
                    <li class="custom-breadcrumb-item active" >
                        <a href="{% url 'modelhub:model_list' %}">
                            <i class="bi bi-box-seam"></i> 모델 허브
                        </a>
                    </li>
                </ol>
            </nav>
        </div>
    </div>
</div>
<<<<<<< Updated upstream

=======
{% endblock breadcrumb %}

{% block content %}
>>>>>>> Stashed changes
<div class="container">
    <div class="col-md-12">
        <div class="card border-0 shadow-sm">
            <div class="card-body">
                <form method="get" class="row g-3 justify-content-end">
                    <div class="col-md-4 text-end">
                        <a href="{% url 'modelhub:model_add' %}" class="btn btn-primary">
                            <i class="bi bi-plus-circle"></i> 모델 추가
                        </a>
                    </div>
                </form>
            </div>
<<<<<<< Updated upstream
>>>>>>> Stashed changes
=======
>>>>>>> Stashed changes
        </div>
    </div>

    <!-- 통계 카드 -->
    <div class="row mb-4">
        <div class="col-md-4">
            <div class="card border-primary">
                <div class="card-body text-center">
                    <h6 class="text-muted">전체 모델</h6>
                    <h2 class="text-primary">{{ total_models }}</h2>
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="card border-success">
                <div class="card-body text-center">
                    <h6 class="text-muted">기본 모델</h6>
                    <h2 class="text-success">{{ total_base }}</h2>
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="card border-info">
                <div class="card-body text-center">
                    <h6 class="text-muted">커스텀 모델</h6>
                    <h2 class="text-info">{{ total_custom }}</h2>
                </div>
            </div>
        </div>
    </div>

    <!-- 필터 탭 -->
    <ul class="nav nav-tabs mb-3">
        <li class="nav-item">
            <a class="nav-link active" data-bs-toggle="tab" href="#all">전체</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" data-bs-toggle="tab" href="#base">기본 모델</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" data-bs-toggle="tab" href="#custom">커스텀 모델</a>
        </li>
    </ul>

    <div class="tab-content">
        <!-- 전체 탭 -->
        <div class="tab-pane fade show active" id="all">
            <div class="card">
                <div class="card-header">
                    <h5 class="mb-0">전체 모델</h5>
                </div>
                <div class="card-body">
                    {% if base_models or custom_models %}
                        <div class="table-responsive">
                            <table class="table table-hover">
                                <thead>
                                    <tr>
                                        <th>구분</th>
                                        <th>모델명</th>
                                        <th>타입/프레임워크</th>
                                        <th>버전</th>
                                        <th>파일 크기</th>
                                        <th>사용 횟수</th>
                                        <th>상태</th>
                                        <th>작업</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {% for model in base_models %}
                                    <tr>
                                        <td><span class="badge bg-success">기본</span></td>
                                        <td>
                                            <strong>{{ model.display_name }}</strong>
                                            {% if model.is_default %}
                                                <span class="badge bg-warning text-dark">기본</span>
                                            {% endif %}
                                        </td>
                                        <td><span class="badge bg-light text-dark">{{ model.model_type|upper }}</span></td>
                                        <td><small class="text-muted">{{ model.yolo_version|default:model.version }}</small></td>
                                        <td>{{ model.get_file_size_display }}</td>
                                        <td><span class="badge bg-primary">{{ model.usage_count }}</span></td>
                                        <td>
                                            {% if model.is_active %}
                                                <span class="badge bg-success">활성</span>
                                            {% else %}
                                                <span class="badge bg-secondary">비활성</span>
                                            {% endif %}
                                        </td>
                                        <td>
                                            <a href="{% url 'modelhub:model_detail' 'base' model.id %}" 
                                               class="btn btn-sm btn-outline-primary">상세</a>
                                        </td>
                                    </tr>
                                    {% endfor %}
                                    
                                    {% for model in custom_models %}
                                    <tr>
                                        <td><span class="badge bg-info">커스텀</span></td>
                                        <td><strong>{{ model.name }}</strong></td>
                                        <td><span class="badge bg-light text-dark">{{ model.framework|default:"N/A" }}</span></td>
                                        <td>
                                            {% if model.accuracy %}
                                                <small class="text-success">{{ model.accuracy }}%</small>
                                            {% else %}
                                                <small class="text-muted">-</small>
                                            {% endif %}
                                        </td>
                                        <td>{{ model.get_file_size_display }}</td>
                                        <td><span class="badge bg-primary">{{ model.usage_count }}</span></td>
                                        <td>
                                            {% if model.is_validated %}
                                                <span class="badge bg-success">검증됨</span>
                                            {% else %}
                                                <span class="badge bg-warning text-dark">미검증</span>
                                            {% endif %}
                                        </td>
                                        <td>
                                            <a href="{% url 'modelhub:model_detail' 'custom' model.id %}" 
                                               class="btn btn-sm btn-outline-info">상세</a>
                                        </td>
                                    </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                        </div>
                    {% else %}
                        <div class="text-center py-5">
                            <i class="bi bi-inbox" style="font-size: 4rem; color: #ccc;"></i>
                            <p class="text-muted mt-3">등록된 모델이 없습니다</p>
                            <a href="{% url 'modelhub:model_add' %}" class="btn btn-primary">
                                <i class="bi bi-plus-circle"></i> 첫 모델 추가하기
                            </a>
                        </div>
                    {% endif %}
                </div>
            </div>
        </div>

        <!-- 기본 모델 탭 -->
        <div class="tab-pane fade" id="base">
            <div class="card">
                <div class="card-header bg-success text-white">
                    <h5 class="mb-0">기본 모델</h5>
                </div>
                <div class="card-body">
                    {% if base_models %}
                        <div class="table-responsive">
                            <table class="table table-hover">
                                <thead>
                                    <tr>
                                        <th>모델명</th>
                                        <th>타입</th>
                                        <th>YOLO 버전</th>
                                        <th>파일 크기</th>
                                        <th>사용 횟수</th>
                                        <th>상태</th>
                                        <th>작업</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {% for model in base_models %}
                                    <tr>
                                        <td>
                                            <strong>{{ model.display_name }}</strong>
                                            {% if model.is_default %}
                                                <span class="badge bg-warning text-dark">기본</span>
                                            {% endif %}
                                        </td>
                                        <td><span class="badge bg-success">{{ model.model_type|upper }}</span></td>
                                        <td><code>{{ model.yolo_version|default:"-" }}</code></td>
                                        <td>{{ model.get_file_size_display }}</td>
                                        <td><span class="badge bg-primary">{{ model.usage_count }}</span></td>
                                        <td>
                                            {% if model.is_active %}
                                                <span class="badge bg-success">활성</span>
                                            {% else %}
                                                <span class="badge bg-secondary">비활성</span>
                                            {% endif %}
                                        </td>
                                        <td>
                                            <a href="{% url 'modelhub:model_detail' 'base' model.id %}" 
                                               class="btn btn-sm btn-outline-primary">상세</a>
                                        </td>
                                    </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                        </div>
                    {% else %}
                        <div class="text-center py-4">
                            <p class="text-muted">등록된 기본 모델이 없습니다</p>
                        </div>
                    {% endif %}
                </div>
            </div>
        </div>

        <!-- 커스텀 모델 탭 -->
        <div class="tab-pane fade" id="custom">
            <div class="card">
                <div class="card-header bg-info text-white">
                    <h5 class="mb-0">커스텀 모델</h5>
                </div>
                <div class="card-body">
                    {% if custom_models %}
                        <div class="table-responsive">
                            <table class="table table-hover">
                                <thead>
                                    <tr>
                                        <th>모델명</th>
                                        <th>프레임워크</th>
                                        <th>정확도</th>
                                        <th>파일 크기</th>
                                        <th>사용 횟수</th>
                                        <th>검증</th>
                                        <th>작업</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {% for model in custom_models %}
                                    <tr>
                                        <td><strong>{{ model.name }}</strong></td>
                                        <td><span class="badge bg-light text-dark">{{ model.framework|default:"N/A" }}</span></td>
                                        <td>
                                            {% if model.accuracy %}
                                                <span class="badge bg-success">{{ model.accuracy }}%</span>
                                            {% else %}
                                                -
                                            {% endif %}
                                        </td>
                                        <td>{{ model.get_file_size_display }}</td>
                                        <td><span class="badge bg-primary">{{ model.usage_count }}</span></td>
                                        <td>
                                            {% if model.is_validated %}
                                                <span class="badge bg-success">검증됨</span>
                                            {% else %}
                                                <span class="badge bg-warning text-dark">미검증</span>
                                            {% endif %}
                                        </td>
                                        <td>
                                            <a href="{% url 'modelhub:model_detail' 'custom' model.id %}" 
                                               class="btn btn-sm btn-outline-info">상세</a>
                                        </td>
                                    </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                        </div>
                    {% else %}
                        <div class="text-center py-4">
                            <p class="text-muted">등록된 커스텀 모델이 없습니다</p>
                        </div>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Bootstrap Icons CDN -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
{% endblock %}
